---
title: "AIプロジェクト管理エージェント続編：絶望のパッケージ化と「ヒューリスティック」の正しい意味"
date: 2026-01-22
categories: ["knowledge-management"]
tags: ["ai-agent", "chatgpt", "json-schema", "project-management", "vibe-coding"]
draft: false
---

## まず、前回の訂正から

[前回の記事](/posts/2025-01-17-project-management-ai-agent/)で「ヒューリスティック」という言葉を何度も使ったのだが、実は使い方が微妙に間違っていたことに気づいた。

きっかけは、今回の続きの作業中にAIが「ヒューリスティックな要約スクリプト」という表現を使ったこと。あれ、自分が使ってた意味と違うぞ？と。

### ヒューリスティクスの本来の意味

**Deterministic Heuristics**（決定論的ヒューリスティクス）は、経験則から導き出したルールを当てはめて答えを出す手法。ルールベースなので、同じ入力に対して毎回同じ答えになる。「ファイルサイズが1MB以上なら要約する」みたいな、人間が決めたルールのこと。

一方、LLMがやっていることは厳密にはヒューリスティクスではなく：
- 近似推論
- 確率的生成
- 経験的に良い回答を出す

という話らしい。上記のことを指して、現場では雑に「heuristic」と呼ばれることがあるそうだが、私もまさに同じく「経験的に良い回答を出す」＝ヒューリスティックだと思い込んで、前回の記事でAIが自由にやることを全部「ヒューリスティック」と呼んでしまっていた。

正しくは「AIにヒューリスティックにやらせてたら壊れた」じゃなくて、「AIに非構造的に自由にやらせてたら壊れた」が正確な表現だった。

まあ、言いたかったことは伝わってたと思うけど、一応訂正。

---

## さて、本題：あれからどうなったか

前回の記事で「JSON Schemaをビシッと決めて、プロジェクト管理エージェントを完成させる」と宣言した。あれから5日。進捗を報告する。

### やったこと

前回の終わりで描いた設計図に沿って、ChatGPTと一緒に進めた：

1. **Project Schemaを作成** — 今までMDに自由に書いてた内容に合わせて、ちゃんとした型を定義
2. **Migration用のCSVテンプレートを作成** — 既存のMDからデータを移行するため
3. **手動でCSVを埋めて、PythonでJSONに変換** — この時点で1プロジェクト＝1JSONファイルになった
4. **ヒューリスティックな要約スクリプト** — 全プロジェクトのJSONを要約して1ファイルにまとめるPython（ここが本来の意味での「ヒューリスティック」。ルールベースで要約する）
5. **要約ファイルがAgentとの会話のスターター** — これを渡して会話を始める
6. **Patch Schemaも作成** — AgentにはPatch形式でアップデートを出力してもらう

ここまでは順調だった。

### 絶望のパッケージ化

問題はここから。

受け取ったPatchをJSONに書き戻す（Writeback）スクリプトを書いてもらったら、**なぜか6個のPythonファイルに分かれたパッケージ**が出てきた。

意味がわからない。

会社のAgentはファイル操作ができないので、書いてもらったコードを自分でコピーして保存している。1ファイルのスクリプトならまだいいが、パッケージとなると：

- フォルダ構成どうする？
- `__init__.py` って何？
- importのパスが通らない
- ファイルをどこに置いてどこでRunすればいいかわからない

完全に迷子になった。

しかも、AIはいつも通り変数名を間違えたり、SchemaとScriptの整合性が取れてなかったりで、どこを直しても別の場所が壊れる。前回と同じパターン。もう諦めようかと思った。

### でも、もうちょっとだけ

諦めかけたけど、もうちょっとだけやってみた。

今回やり方を変えたのは、**フォルダ構成のスナップショットを毎回貼る**こと。「今こういう状態です」「このファイルはどこに置けばいいですか」「どうやってRunしますか」と、手取り足取り教えてもらった。

これが効いた。AIが現状を正確に把握できるようになったことで、的確な指示が返ってくるようになった。

### 動いた

結果、Writebackスクリプトが動くようになった。現時点で4つのOperationがある：

- Add Project（新規プロジェクト追加）
- Update Project（プロジェクト情報の更新）
- Add Objects（タスクやリスクの追加）
- Update Objects（タスクやリスクの更新）

まだ全部のテストはできていないが、基本的な差分適用は動いている。

あと、JSONのままだと人間が読めないので、閲覧用のMarkdownに変換するスクリプトも書いてもらった。まだ足りない項目があるので、ここは引き続き作業中。

## 今回の学び

1. **用語は正確に使おう** — 間違った理解のまま使い続けると、どこかで混乱する（今回は自分がAIの出力を見て混乱した）

2. **AIにコンテキストをちゃんと渡す** — フォルダ構成のスナップショットを貼るだけで、回答の精度が全然違った。「わかるでしょ」は通用しない

3. **諦めない（でも戦略は変える）** — 同じやり方で何回もぶつかるなら、聞き方やコンテキストの渡し方を変えてみる

4. **わからないものが出てきても、現状を伝えれば前に進める** — `__init__.py`もimportも意味不明だったけど、フォルダのスナップショットを貼って「これどういうこと？」と聞き続けたら、パッケージ構成が少しずつわかってきた。わからないこと自体は問題じゃない

## 次のステップ

- 残りのOperationのテスト
- MD変換スクリプトの項目追加
- 実運用で回してみて、Schema自体の改善点を見つける

前回の「道半ば」から5日経って、まだ道半ばだけど、確実に前進している。少なくとも、JSONが何かはもうわかるようになった。

---

**関連記事:**
- [前回：プロジェクト管理AIエージェントを作った1週間](/posts/2025-01-17-project-management-ai-agent/)
